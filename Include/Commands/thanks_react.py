from random import randint

#  –ò –ø—É—Å—Ç—å —Å–æ–ª–Ω—Ü–µ —Å–∏—è–µ—Ç –Ω–∞–¥ —Ç–≤–æ–µ–≥–æ –≥–æ–ª–æ–≤–æ–π, –ø—É—Ç–Ω–∏–∫!
#  –ò –ø—É—Å—Ç—å –¥–æ–∂–¥—å –Ω–µ –±—É–¥–µ—Ç –ø—Ä–æ–±–ª–µ–º–æ–π –¥–ª—è —Ç–µ–±—è!


def react(vk_session, sender_id, last_q, last_result=None):
    global vk
    global id
    id = sender_id
    vk = vk_session
    reacts = {
        'r': roll_r,
        'd': dicer_r,
        'f': flip_r,
        'q': quest_r,
        'w': weather_r,
        'a': anime_r,
        's': skirm_r,
        'rasp': rasp_r
    }
    return reacts.get(last_q)(last_result)

def roll_r(result):
    return "–î–∞ –ø–æ–∂–∞–ª—É–π—Å—Ç–∞, {0}. –ù–∞–¥–µ—é—Å—å, —á–∏—Å–ª–æ {1} —Ç–µ–±—è —É—Å—Ç—Ä–æ–∏–ª–æ".format(
        '–î–æ—Ä–æ–≥–∞—è' if vk.method('users.get', {'user_ids': id, 'fields': 'sex'})[0]['sex'] == 1 else "–î–æ—Ä–æ–≥–æ–π",
        result
    )

def dicer_r(result):
    if int(result) == 1:
        ansv = "–ú–∏–Ω–∏–º–∞–ª—å–Ω–æ–µ —á–∏—Å–ª–æ, –Ω–æ –Ω–µ –æ–±–∏–∂–∞–π—Å—è! –ú–æ–∂–Ω–æ –∫–∏–Ω—É—Ç—å –µ—â–µ –º–Ω–æ–≥–æ –∫—É–±–∏–∫–æ–≤"
    elif 1 < int(result) < 6:
        ansv = "–ù–µ–ø–ª–æ—Ö–æ–µ —á–∏—Å–ª–æ, {0}, –Ω–µ –º–∞–ª–µ–Ω—å–∫–æ–µ, –Ω–æ –∏ –Ω–µ –±–æ–ª—å—à–æ–µ".format(result)
    else:
        ansv = "–ú–∞–∫—Å–∏–º–∞–ª—å–Ω–æ –≤–æ–∑–º–æ–∂–Ω—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç, –Ω–æ –Ω–µ –æ–±–æ–ª—å—â–∞–π—Å—è (—è —Ç–µ–±–µ –ø–æ–¥–∫—Ä—É—Ç–∏–ª, –Ω–æ –±–æ–ª—å—à–µ –Ω–µ –±—É–¥—É ;) )"

    return "–ö–∏–¥–∞–ª —ç—Ç–æ—Ç –∫—É–±–∏–∫ –¥–ª—è —Ç–µ–±—è, {0}! {1}".format(
        '–î–æ—Ä–æ–≥–∞—è' if vk.method('users.get', {'user_ids': id, 'fields': 'sex'})[0]['sex'] == 1 else "–î–æ—Ä–æ–≥–æ–π",
        ansv
    )

def flip_r(_):
    return "–Ø –≤—Å–µ–≥–æ-—Ç–æ –ø–æ–¥–∫–∏–Ω—É–ª –º–æ–Ω–µ—Ç–∫—É, –Ω–æ –ü–æ–∂–∞–ª—É–π—Å—Ç–∞"

def quest_r(_):
    return "–í—Å–µ–≥–¥–∞ –ø–æ–∂–∞–ª—É–π—Å—Ç–∞, {0}!".format(
        '–ú–∏–ª–µ–¥–∏' if vk.method('users.get', {'user_ids': id, 'fields': 'sex'})[0]['sex'] == 1 else "–ú–∏–ª–æ—Ä–¥"
    )

def weather_r(type, to_weather=False):
    weather_type = {
        "–ü–∞—Å–º—É—Ä–Ω–æ": "–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –∏ –ø—É—Å—Ç—å —ç—Ç–∏ –Ω–µ–±–æ–ª—å—à–∏–µ —Ç—É—á–∏ –Ω–µ —Ä–∞—Å—Å—Ç—Ä–∞–∏–≤–∞—é—Ç —Ç–µ–±—è –Ω–∞ —Ç–≤–æ–µ–º –ø—É—Ç–∏!" if not to_weather else "‚òÅÔ∏è‚òÅÔ∏è‚òÅÔ∏è",
        "–Ø—Å–Ω–æ": "–ù–µ –±–ª–∞–≥–æ–¥–∞—Ä–∏, –∏ –ø—É—Å–∫–∞–π —Å–æ–ª–Ω—Ü–µ —Å–∏—è–µ—Ç –Ω–∞–¥ —Ç–≤–æ–µ–π –≥–æ–ª–æ–≤–æ–π, –ü—É—Ç–Ω–∏–∫!" if not to_weather else "‚òÄÔ∏è",
        "–û–±–ª–∞—á–Ω–æ": "–î–ª—è —ç—Ç–æ–≥–æ —è –∑–¥–µ—Å—å! –ò –ø—É—Å–∫–∞–π —ç—Ç–∏ –º–∞–ª–µ–Ω—å–∫–∏–µ –æ–±–ª–∞—á–∫–∞ –Ω–µ —Å–º—É—Ç—è—Ç —Ç–µ–±—è!" if not to_weather else "‚òÅÔ∏è",
        "–û–±–ª–∞—á–Ω–æ —Å –ø—Ä–æ—è—Å–Ω–µ–Ω–∏—è–º–∏": "–ù–µ –∑–∞ —á—Ç–æ! –≠—Ç–∏ –æ–±–ª–∞–∫–∞ –Ω–∏–∫–æ–≥–¥–∞ –Ω–µ —Å–º–æ–≥—É—Ç –∑–∞—Ç–º–∏—Ç—å —Ç–∞–∫–æ–µ –°–æ–ª–Ω—Ü–µ, –∫–∞–∫ –¢—ã!" if not to_weather else "‚õÖÔ∏è",
        "–ù–µ–±–æ–ª—å—à–æ–π –¥–æ–∂–¥—å": "–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, " + ("–î–æ—Ä–æ–≥–∞—è!" if vk.method('users.get', {'user_ids': id, 'fields': 'sex'})[0]['sex'] == 1 else "–î–æ—Ä–æ–≥–æ–π!") \
        + " –ò –Ω–µ –¥–∞–π —ç—Ç–æ–º—É –¥–æ–∂–¥—é —Ä–∞–∑–º—ã—Ç—å —Ç–≤–æ–π –æ—Å—Ç—Ä—ã–π –≤–∑–æ—Ä!" if not to_weather else "üåß",
        "–î–æ–∂–¥—å": "–ù–µ —Å—Ç–æ–∏—Ç –±–ª–∞–≥–æ–¥–∞—Ä–Ω–æ—Å—Ç–µ–π, –î–æ—Ä–æ–≥—É—à–∞! –ò –Ω–µ –¥–∞–π —ç—Ç–æ–º—É –¥–æ–∂–¥—é –≤—Å—Ç–∞—Ç—å –ø—Ä–µ–≥—Ä–∞–¥–æ–π –º–µ–∂–¥—É –¢–æ–±–æ–π –∏ –¢–≤–æ–µ–π —Ü–µ–ª—å—é" if not to_weather else "üåß‚òîÔ∏èüåß",
        "–ú–∞–ª–æ–æ–±–ª–∞—á–Ω–æ": "–¢–µ–±–µ —Å–ø–∞—Å–∏–±–æ, " + ("–î–æ—Ä–æ–≥–∞—è!" if vk.method('users.get', {'user_ids': id, 'fields': 'sex'})[0]['sex'] == 1 else "–î–æ—Ä–æ–≥–æ–π!") \
        + " –¢—ã –∂–µ –Ω–µ –¥–∞—à—å —ç—Ç–∏–º —Ç—É—á–∫–∞–º —Ä–∞–∑—Ä—É—à–∏—Ç—å —Ç–≤–æ–π —ç–Ω—Ç—É–∑–∏–∞–∑–º —Å–µ–≥–æ–¥–Ω—è, –Ω–µ –ø—Ä–∞–≤–¥–∞ –ª–∏?" if not to_weather else "üå§"
    }
    return weather_type[type]


def anime_r(_):
    return "–î–∞ –Ω–µ –∑–∞ —á—Ç–æ! –£–¥–∞—á–Ω–æ–≥–æ –ø—Ä–æ—Å–º–æ—Ç—Ä–∞!"

def skirm_r(result):
    return "–¢–µ–±–µ —Å–ø–∞—Å–∏–±–æ! {0}".format(
        "–ù–µ —Ä–∞—Å—Å—Ç—Ä–∞–∏–≤–∞–π—Å—è, —á—Ç–æ –Ω–µ –ø–æ–ª—É—á–∏–ª–æ—Å—å –ø–µ—Ä–µ—Å—Ç—Ä–µ–ª—è—Ç—å {0}. –í—Å–µ–≥–¥–∞ –º–æ–∂–Ω–æ –ø–æ–ø—Ä–æ—Å–∏—Ç—å —Ä–µ–≤–∞–Ω—à!".format(
            vk.method('users.get', {'user_ids': result[0], 'name_case': 'gen'})[0]['first_name']
        ) if result[0] != id else "–ü–æ–∑–¥—Ä–∞–≤–ª—è—é —Å –æ–¥–µ—Ä–∂–∞–Ω–Ω–æ–π –ø–æ–±–µ–¥–æ–π –Ω–∞–¥ {0}! –ù–æ –æ–ø–∞—Å–∞–π—Å—è —Ä–∞—Å–ø—Ä–∞–≤—ã ;)".format(
            vk.method('users.get', {'user_ids': result[1], 'name_case': 'gen'})[0]['first_name']
        )
    )

def rasp_r(_):
    return "–í—Å–µ–≥–¥–∞ –ø–æ–∂–∞–ª—É–π—Å—Ç–∞, –∏ –Ω–µ –æ–ø–∞–∑–¥–∞–π –Ω–∞ –ø–∞—Ä—É!"
